<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Jesse Sadler, University Libraries">

<title>Zotero</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="zotero_files/libs/clipboard/clipboard.min.js"></script>
<script src="zotero_files/libs/quarto-html/quarto.js"></script>
<script src="zotero_files/libs/quarto-html/popper.min.js"></script>
<script src="zotero_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="zotero_files/libs/quarto-html/anchor.min.js"></script>
<link href="zotero_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="zotero_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="zotero_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="zotero_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="zotero_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="zotero.pdf"><i class="bi bi-file-pdf"></i>Typst</a></li></ul></div></div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Zotero</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Jesse Sadler, University Libraries </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<section id="why-bibliographical-managers" class="level3">
<h3 class="anchored" data-anchor-id="why-bibliographical-managers">Why bibliographical managers?</h3>
<ol type="1">
<li>Collect references</li>
<li>Store PDFs, links, other documents</li>
<li>Organize your references</li>
<li>Read and markup PDFs and take notes</li>
<li>Style citations</li>
<li>Share references with collaborators</li>
</ol>
</section>
<section id="why-zotero" class="level3">
<h3 class="anchored" data-anchor-id="why-zotero">Why Zotero?</h3>
<ul>
<li>It is free and open source</li>
<li>Built by and for the humanities. It is a project created and maintained by a group called <a href="https://digitalscholar.org">Digital Scholar</a> that also maintains Omeka and Tropy. It came out of the DH group at George Mason University.</li>
<li>Syncs across devices. There is a web version and iOS version.</li>
<li>Ability to collaborate through shared groups.</li>
</ul>
</section>
<section id="things-to-keep-in-mind" class="level3">
<h3 class="anchored" data-anchor-id="things-to-keep-in-mind">Things to keep in mind</h3>
<ul>
<li>Bibliographic managers are an investment. The time to learn</li>
<li>Take time to read the documentation.</li>
<li>Take time to play around with Zotero or any other software to see how you want to use it and if you like it.</li>
<li>Bad data in leads to bad data out.</li>
</ul>
</section>
<section id="getting-zotero" class="level3">
<h3 class="anchored" data-anchor-id="getting-zotero">Getting Zotero</h3>
<ol type="1">
<li>Download Zotero: https://www.zotero.org</li>
<li>Register for an account. You do not need to use your VT email address.</li>
<li>You can store your PDFs in the cloud. You get 300 MB free. You do not need to pay for extra storage until you decide you need it. There are also options to store your PDFs in an external folder such as DropBox, iCloud, OneDrive, etc.<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></li>
</ol>
</section>
</section>
<section id="adding-items-to-zotero" class="level2">
<h2 class="anchored" data-anchor-id="adding-items-to-zotero">1. Adding items to Zotero</h2>
<p><a href="https://www.zotero.org/support/adding_items_to_zotero">Adding items to Zotero documentation</a></p>
<ol type="1">
<li>Export RIS file usually found in a <em>cite</em> button on library or database sites.</li>
<li>Use Zotero Connector plugin for web browser</li>
<li>Add Item by Identifier using “magic wand” button in Zotero</li>
<li>Add PDF and retrieve metadata</li>
<li>Manually add an item
<ul>
<li>Edited volume: Created using the Book type and filling out the editor instead of author.</li>
<li>Book section: Create a book section by right-clicking on an edited volume and choose Create Book Section.</li>
</ul></li>
</ol>
<p><strong>Remember</strong>, always make sure to check the metadata added to a reference. Make sure to check the item type, that the title, publisher, and place of publication are correct and do not have any odd formatting.</p>
</section>
<section id="organizing-your-references" class="level2">
<h2 class="anchored" data-anchor-id="organizing-your-references">2. Organizing your references</h2>
<p><a href="https://www.zotero.org/support/collections_and_tags">Collections and Tags documentation</a></p>
<ul>
<li>Collections
<ul>
<li>Categories or folders: A hierarchical organization of items into groups and subgroups.</li>
<li>The same item can belong to multiple collections.</li>
<li>Most often will add items to a collection by dragging them.</li>
<li>Remove an item from a collection by deleting it while within the collection view. This will not delete the item from your Library.</li>
<li>Can have a “smart” collection by saving an Advanced Search. Advanced Search is under the Edit menu or the magnifier icon on the search bar.</li>
</ul></li>
<li>Tags
<ul>
<li>Keywords: Each item can have as many tags as you want, but it is up to .</li>
<li>Tags are good for drilling down into your Library using the tag selector in the lower-left of the app.</li>
<li>Clicking on multiple tags will perform an <code>AND</code> search.</li>
</ul></li>
<li>Related items
<ul>
<li><a href="https://www.zotero.org/support/related">Related Items documentation</a></li>
<li>Chapters within an Edited volume</li>
<li>Book reviews to book reviewed</li>
<li>Different versions of a work</li>
</ul></li>
</ul>
<section id="things-to-keep-in-mind-1" class="level3">
<h3 class="anchored" data-anchor-id="things-to-keep-in-mind-1">Things to keep in mind</h3>
<ul>
<li>Tags are portable, but collections are not.</li>
<li>Tags are only as useful as you make them.</li>
<li>You have to decide what system is best for you.</li>
</ul>
</section>
</section>
<section id="read-and-markup-pdfs-and-take-notes" class="level2">
<h2 class="anchored" data-anchor-id="read-and-markup-pdfs-and-take-notes">4. Read and markup PDFs and take notes</h2>
<ul>
<li>You can read and markup PDFs within Zotero.
<ul>
<li><a href="https://www.zotero.org/support/pdf_reader">PDF Reader documentation</a></li>
<li>If you prefer to open PDFs in an external PDF reader, you can choose one from the General pane of the Zotero preferences.</li>
<li>Alternatively, you can right-click on an item and choose Show File to open in your application of choice.</li>
</ul></li>
<li>Notes
<ul>
<li><a href="https://www.zotero.org/support/notes">Notes documentation</a></li>
<li>You can export annotations in your PDF into a note by right-clicking on an item and choosing Add Note from Annotations.</li>
<li>You can create notes that can be standalone items or are attached to a reference.</li>
<li>As with any other item in Zotero, notes can be tagged and related to other items.</li>
</ul></li>
</ul>
<section id="things-to-keep-in-mind-2" class="level3">
<h3 class="anchored" data-anchor-id="things-to-keep-in-mind-2">Things to keep in mind</h3>
<ul>
<li>Annotations created in the built-in PDF reader are stored in the Zotero database, so they won’t be visible in external PDF readers unless you export a PDF with embedded annotations.</li>
<li>Whether you want to take notes on texts within Zotero is up to you. The benefit is that everything is in the same place. The drawback is that you can only search your notes within Zotero.</li>
</ul>
</section>
</section>
<section id="style-citations" class="level2">
<h2 class="anchored" data-anchor-id="style-citations">5. Style citations</h2>
<section id="within-zotero" class="level3">
<h3 class="anchored" data-anchor-id="within-zotero">Within Zotero</h3>
<p><a href="https://www.zotero.org/support/creating_bibliographies">Creating Bibliographies within Zotero documentation</a></p>
<ul>
<li>Quick copy styled citations
<ul>
<li>Copy Citation: ⌘⇧A</li>
<li>Copy Bibliography: ⌘⇧C</li>
<li>Choose format for Quick copy in Preferences → Export</li>
</ul></li>
<li>Bibliography or citation list
<ul>
<li>Either select the items you want, right-click and choose Create Bibliography from Items…</li>
<li>Or choose a right-click on a collection and choose Create Bibliography from Collection…</li>
<li>Then choose the bibliographical style you want, whether to create citations or a bibliography, and how you want the citations exported.</li>
</ul></li>
</ul>
</section>
<section id="microsoft-word" class="level3">
<h3 class="anchored" data-anchor-id="microsoft-word">Microsoft Word</h3>
<p><a href="https://www.zotero.org/support/word_processor_plugin_usage">Using Zotero with Word</a>: The Zotero Word plugin should be installed automatically when you install Zotero. The Zotero Word plugin adds a Zotero tab to Microsoft Word.</p>
<ul>
<li>Create a footnote/endnote
<ul>
<li>Click the Add/Edit Citation button in the Zotero tab to bring up the citation dialog.</li>
<li>Search for items and click on them or press Return to select.</li>
<li>Click on a citation within the dialog to add pages or make other customizations.</li>
</ul></li>
<li>Edit a citation
<ul>
<li>Click an existing citation in your document and click Add/Edit Citation to open the citation dialog.</li>
</ul></li>
<li>Create a bibliography
<ul>
<li>Place the cursor where you want the bibliography and click the Add/Edit Bibliography button.</li>
</ul></li>
<li>Document preferences: Citation styles
<ul>
<li>The Document Preferences window is where you will choose your citation style.</li>
</ul></li>
</ul>
</section>
<section id="google-docs" class="level3">
<h3 class="anchored" data-anchor-id="google-docs">Google Docs</h3>
<p><a href="https://www.zotero.org/support/google_docs">Using Zotero with Google Docs</a>: Google Docs support is provided by the <a href="https://www.zotero.org/download/connectors">Zotero Connector</a> for your browser. The Connector adds a Zotero menu to the Google Docs interface. This provides the same capabilities as with Word with a different interface.</p>
<ul>
<li>Authorization
<ul>
<li>You will need to authorize Zotero to integrate with Google Docs the first time you use it.</li>
</ul></li>
<li>Create a footnote/endnote
<ul>
<li>Choose Add/Edit Citation from the Zotero menu.</li>
<li>Interface to choose references is in Zotero.</li>
</ul></li>
<li>Edit a citation
<ul>
<li>Click an existing citation in your document and click Edit with Zotero or Add/Edit Citation from the Zotero menu.</li>
</ul></li>
<li>Create a bibliography
<ul>
<li>Place the cursor where you want the bibliography and click Add/Edit Bibliography from the Zotero menu.</li>
</ul></li>
<li>Document preferences: Citation styles
<ul>
<li>The Document Preferences window is where you will choose your citation style within the Zotero app.</li>
</ul></li>
</ul>
</section>
<section id="things-to-keep-in-mind-3" class="level3">
<h3 class="anchored" data-anchor-id="things-to-keep-in-mind-3">Things to keep in mind</h3>
<ul>
<li>By using the Word plugin or Zotero Connector with Google Docs the citations and bibliography are linked to Zotero. This means you can make changes to the Document Preferences or to an individual references and the output will be updated.</li>
<li>If you share the document with someone else or want to make final manual tweaks to the citations, you will want to unlink the document.</li>
</ul>
</section>
</section>
<section id="collaboration-zotero-groups" class="level2">
<h2 class="anchored" data-anchor-id="collaboration-zotero-groups">6. Collaboration: Zotero Groups</h2>
<p><a href="https://www.zotero.org/support/groups">Zotero Groups</a> provides a way to collaborate with others, sharing references, notes, and (optionally) PDFs. You can create, view, and interact with the Group Library online or in the Zotero app.</p>
<ul>
<li>Creating groups
<ol type="1">
<li>Within the Zotero app in File → New Library → New Group</li>
<li>On the <a href="https://www.zotero.org/groups">Zotero Groups webpage</a> choose Create a New Group.</li>
</ol></li>
<li>Group types: choose between private, public with closed membership, or public with open membership.</li>
<li>Set Library Settings</li>
<li>Group Settings provides information about the group</li>
<li>Manage Members: Click Send More Invitations to invite people to the group.</li>
</ul>
</section>
<section id="i-just-want-to-style-citations" class="level2">
<h2 class="anchored" data-anchor-id="i-just-want-to-style-citations">I just want to style citations</h2>
<p>Zotero is an investment. It takes time and effort to collect, organize, and proofread the references. What if you just want to quickly create footnotes or a bibliography?</p>
<section id="zoterobib" class="level3">
<h3 class="anchored" data-anchor-id="zoterobib"><a href="https://zbib.org">ZoteroBib</a></h3>
<ol type="1">
<li>Search or manually enter a reference</li>
<li>Edit citation if necessary</li>
<li>Copy footnote by clicking on quotation mark</li>
<li>Copy bibliography entry by clicking on two-pages symbol</li>
<li>Copy to clipboard to copy full bibliography.</li>
</ol>
</section>
</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>See the documentation on <a href="https://www.zotero.org/support/sync#alternative_syncing_solutions">Alternative Syncing solutions</a>.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>